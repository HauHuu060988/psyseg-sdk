const _0x5efd8f=_0x5f34;(function(_0x24756f,_0x438d42){const _0x19fd4d=_0x5f34,_0x135a4a=_0x24756f();while(!![]){try{const _0x8ed94b=parseInt(_0x19fd4d(0x9c))/0x1+parseInt(_0x19fd4d(0xb1))/0x2+parseInt(_0x19fd4d(0x9b))/0x3+parseInt(_0x19fd4d(0xb5))/0x4*(-parseInt(_0x19fd4d(0x9f))/0x5)+-parseInt(_0x19fd4d(0xb8))/0x6+parseInt(_0x19fd4d(0xab))/0x7*(-parseInt(_0x19fd4d(0xba))/0x8)+parseInt(_0x19fd4d(0xbd))/0x9*(parseInt(_0x19fd4d(0xa3))/0xa);if(_0x8ed94b===_0x438d42)break;else _0x135a4a['push'](_0x135a4a['shift']());}catch(_0x820a4f){_0x135a4a['push'](_0x135a4a['shift']());}}}(_0x288b,0x9cc33));import*as _0x493b76 from'@tensorflow/tfjs';import{SmartEyes}from'./ML/ML.js';import{preProcessing}from'./Preprocessing/Preprocessing.js';import{psy_seg_overlay_background_internal,psy_seg_blur_background_internal,psy_seg_remove_background_internal}from'./Effects/Effects.js';import{psy_seg_get_alpha_internal}from'./Effects/Common.js';import{refine}from'./Refinement/Refinement.js';_0x5efd8f(0xc0);export function ColorSpaceType(){return{'COLOR_SPACE_RGBA':0x0,'COLOR_SPACE_BGR':0x1,'COLOR_SPACE_RGB':0x2,'COLOR_SPACE_NV21':0x3,'COLOR_SPACE_NV12':0x4,'COLOR_SPACE_I420':0x5,'COLOR_SPACE_YUY2':0x6};};function _0x288b(){const _0x1fd291=['canvas','tidy','run','fgCanvas','1355560GGmgUZ','height','Cannot\x20get\x20alpha\x20mask\x20due\x20to\x20','log','1923676CNuVTQ','clearRect','toPixels','4469898YUBlJH','getContext','5006248LnJaxt','runUE','Cannot\x20create\x20background\x20due\x20to\x20','9AfaQOA','1.5.0','catch','use\x20strict','putImageData','backend','browser','bind','SmartEyes','model','Cannot\x20get\x20alpha\x20effects\x20due\x20to\x20','3762483bEZtUb','410838HfUbre','reshape','tflite','10ohNpkc','div','canvasContext','fgCanvasContext','6319220dKOpbB','then','startScope','COLOR_SPACE_RGBA','endScope','data','width','colorWidth','7uriPGQ','engine'];_0x288b=function(){return _0x1fd291;};return _0x288b();}export function PsySegSetupInfo(_0x2d9bd5,_0x369979){return{'colorWidth':_0x2d9bd5,'colorHeight':_0x369979};}function _0x5f34(_0x42d9b7,_0x273bb5){const _0x288b1e=_0x288b();return _0x5f34=function(_0x5f3493,_0x5bdf8f){_0x5f3493=_0x5f3493-0x99;let _0x14fad9=_0x288b1e[_0x5f3493];return _0x14fad9;},_0x5f34(_0x42d9b7,_0x273bb5);};export function PsySegExtraParams(_0x31435e=0x1){return{'erode':_0x31435e};}export function PsySegBuf(_0xab0c77,_0x76ff22,_0xde2699,_0x41a1b0){return{'width':_0xab0c77,'height':_0x76ff22,'channels':_0xde2699,'data':_0x41a1b0};};class PsySeg{constructor(_0x2f41c5,_0x3e0b73){const _0x3bc7fc=_0x5efd8f;this[_0x3bc7fc(0xa9)]=_0x2f41c5[_0x3bc7fc(0xaa)],this[_0x3bc7fc(0xb2)]=_0x2f41c5['colorHeight'],this[_0x3bc7fc(0xc2)]=_0x3e0b73,this[_0x3bc7fc(0xad)]=document['createElement']('canvas'),this[_0x3bc7fc(0xad)][_0x3bc7fc(0xa9)]=this['width'],this[_0x3bc7fc(0xad)][_0x3bc7fc(0xb2)]=this[_0x3bc7fc(0xb2)],this[_0x3bc7fc(0xa1)]=this['canvas'][_0x3bc7fc(0xb9)]('2d'),this[_0x3bc7fc(0xb0)]=document['createElement'](_0x3bc7fc(0xad)),this[_0x3bc7fc(0xb0)][_0x3bc7fc(0xa9)]=this[_0x3bc7fc(0xa9)],this['fgCanvas'][_0x3bc7fc(0xb2)]=this[_0x3bc7fc(0xb2)],this[_0x3bc7fc(0xa2)]=this[_0x3bc7fc(0xb0)][_0x3bc7fc(0xb9)]('2d'),this[_0x3bc7fc(0xc5)]=null,this[_0x3bc7fc(0xc5)]=new SmartEyes(this[_0x3bc7fc(0xc2)]),this[_0x3bc7fc(0xbb)]=this[_0x3bc7fc(0xbb)][_0x3bc7fc(0xc4)](this);}async[_0x5efd8f(0xbb)](_0x269ba4,_0x37008f,_0x3444cc,_0x3bc799=![]){const _0x18538b=_0x5efd8f;let _0x3112ea=![],_0x132f05=null;_0x3112ea=![];const _0x330af6=this['backend']===_0x18538b(0x9e)?0xa0:0xc0,_0x2302e6=this[_0x18538b(0xc2)]===_0x18538b(0x9e)?0x60:0xc0;let _0x27544e={'width':_0x330af6,'height':_0x2302e6};return await this['SmartEyes'][_0x18538b(0xaf)](_0x269ba4,_0x3444cc,_0x3bc799)[_0x18538b(0xa4)](async _0x3cab62=>{const _0x25f503=_0x18538b;if(this[_0x25f503(0xc2)]===_0x25f503(0x9e))_0x37008f[_0x25f503(0xa8)]=_0x3cab62,_0x37008f['width']=_0x27544e[_0x25f503(0xa9)],_0x37008f[_0x25f503(0xb2)]=_0x27544e[_0x25f503(0xb2)];else{_0x132f05=_0x493b76[_0x25f503(0xae)](()=>{const _0xfaeae9=_0x25f503;return refine(_0x3cab62[_0xfaeae9(0xa0)](_0x493b76['scalar'](0xff)),_0x27544e)[_0xfaeae9(0x9d)]([_0x2302e6,_0x330af6,0x1]);});let _0x9b7a0e=await _0x493b76[_0x25f503(0xc3)][_0x25f503(0xb7)](_0x132f05),_0x47ee7d=new ImageData(_0x9b7a0e,_0x330af6,_0x2302e6),_0x574136=await preProcessing(_0x47ee7d,_0x3444cc,{'width':_0x27544e[_0x25f503(0xa9)],'height':_0x27544e[_0x25f503(0xb2)]},ColorSpaceType[_0x25f503(0xa6)],{'width':_0x269ba4[_0x25f503(0xa9)],'height':_0x269ba4[_0x25f503(0xb2)]});_0x37008f['data']=new ImageData(_0x574136,_0x269ba4[_0x25f503(0xa9)],_0x269ba4['height']),_0x37008f[_0x25f503(0xa9)]=_0x269ba4[_0x25f503(0xa9)],_0x37008f[_0x25f503(0xb2)]=_0x269ba4[_0x25f503(0xb2)];}_0x3112ea=!![];})[_0x18538b(0xbf)](_0x3c3527=>{const _0x4d8c31=_0x18538b;console[_0x4d8c31(0xb4)](_0x4d8c31(0xb3)+_0x3c3527);}),_0x3112ea;}}export async function psy_seg_create(_0x417e29){return new PsySeg(_0x417e29,'tflite');}export async function psy_seg_create_internal(_0x2bcdf9,_0x344be2=_0x5efd8f(0x9e)){return new PsySeg(_0x2bcdf9,_0x344be2);}export async function psy_seg_destroy(_0x153c88){const _0x5af37a=_0x5efd8f;_0x153c88['backend']!==_0x5af37a(0x9e)&&_0x153c88[_0x5af37a(0xc5)]['release'](),delete _0x153c88[_0x5af37a(0xc2)],delete _0x153c88[_0x5af37a(0xa9)],delete _0x153c88['height'],delete _0x153c88[_0x5af37a(0xbb)],delete _0x153c88[_0x5af37a(0xc5)];}export async function psy_seg_create_background(_0x22424a,_0x6f9af4,_0x2e3f03,_0xa75a45){const _0x4dae4e=_0x5efd8f;let _0x2106a2=null;return await preProcessing(_0x22424a,_0x6f9af4,_0x2e3f03,ColorSpaceType()['COLOR_SPACE_RGB'],_0xa75a45)[_0x4dae4e(0xa4)](_0xad3f11=>{_0x2106a2=_0xad3f11;})[_0x4dae4e(0xbf)](_0x58d0e7=>{const _0x3f556d=_0x4dae4e;console[_0x3f556d(0xb4)](_0x3f556d(0xbc)+_0x58d0e7);}),PsySegBuf(_0xa75a45[_0x4dae4e(0xa9)],_0xa75a45[_0x4dae4e(0xb2)],0x4,_0x2106a2);}export async function psy_seg_get_alpha(_0x2977f7,_0x5f2648,_0x3c25ae,_0x626d15){const _0x5293cb=_0x5efd8f;let _0x460442=![];_0x493b76[_0x5293cb(0xac)]()[_0x5293cb(0xa5)]();_0x2977f7[_0x5293cb(0xc5)][_0x5293cb(0x99)]!==null&&await psy_seg_get_alpha_internal(_0x2977f7,_0x5f2648,_0x3c25ae,_0x626d15,!![])[_0x5293cb(0xa4)](_0x37d1b3=>{_0x460442=_0x37d1b3;})[_0x5293cb(0xbf)](_0x5d346f=>{const _0x39c784=_0x5293cb;console[_0x39c784(0xb4)](_0x39c784(0x9a)+_0x5d346f);});if(_0x2977f7['backend']===_0x5293cb(0x9e)){let _0x102f0f=await preProcessing(_0x626d15[_0x5293cb(0xa8)],_0x3c25ae,{'width':_0x626d15['width'],'height':_0x626d15['height']},ColorSpaceType[_0x5293cb(0xa6)],{'width':_0x5f2648['width'],'height':_0x5f2648[_0x5293cb(0xb2)]});_0x626d15[_0x5293cb(0xa8)]=new ImageData(_0x102f0f,_0x5f2648[_0x5293cb(0xa9)],_0x5f2648[_0x5293cb(0xb2)]),_0x626d15[_0x5293cb(0xa9)]=_0x5f2648[_0x5293cb(0xa9)],_0x626d15['height']=_0x5f2648[_0x5293cb(0xb2)];}return _0x493b76[_0x5293cb(0xac)]()[_0x5293cb(0xa7)](),_0x460442;}export async function psy_seg_overlay_background(_0x4307a0,_0x1d5dcd,_0x4e271e,_0x53ebe2,_0x410a83){const _0x324e1e=_0x5efd8f;let _0x1067d7=![];_0x493b76['engine']()[_0x324e1e(0xa5)]();const _0x350532=_0x4307a0[_0x324e1e(0xc2)]===_0x324e1e(0x9e)?0xa0:0xc0,_0x3ba3f6=_0x4307a0['backend']==='tflite'?0x60:0xc0;let _0x434f04=PsySegBuf(_0x350532,_0x3ba3f6,0x4,null);return _0x4307a0['SmartEyes'][_0x324e1e(0x99)]!==null&&await psy_seg_overlay_background_internal(_0x4307a0,_0x1d5dcd,_0x4e271e,_0x53ebe2,_0x434f04,_0x410a83)[_0x324e1e(0xa4)](_0x303cb3=>{_0x1067d7=_0x303cb3;})[_0x324e1e(0xbf)](_0x3b63c5=>{}),_0x493b76[_0x324e1e(0xac)]()[_0x324e1e(0xa7)](),_0x1067d7;}export async function psy_seg_overlay_background_new(_0x4ef208,_0x5a0c57,_0x29b9c5,_0x4ff1b9,_0x20fea5,_0x3eee34=null){const _0x2445e2=_0x5efd8f;_0x493b76[_0x2445e2(0xac)]()[_0x2445e2(0xa5)]();const _0x1fab53=_0x4ef208[_0x2445e2(0xc2)]==='tflite'?0xa0:0xc0,_0x29a9fd=_0x4ef208[_0x2445e2(0xc2)]===_0x2445e2(0x9e)?0x60:0xc0;let _0xa8ceab=PsySegBuf(_0x1fab53,_0x29a9fd,0x4,null);const _0x1ce47f=await psy_seg_remove_background_with_extra_params(_0x4ef208,_0x5a0c57,_0x4ff1b9,_0x20fea5,_0x3eee34);return _0x4ef208['canvasContext'][_0x2445e2(0xc1)](_0x29b9c5[_0x2445e2(0xa8)],0x0,0x0),_0x4ef208[_0x2445e2(0xa2)][_0x2445e2(0xb6)](0x0,0x0,_0x4ef208[_0x2445e2(0xa9)],_0x4ef208[_0x2445e2(0xb2)]),_0x4ef208[_0x2445e2(0xa2)][_0x2445e2(0xc1)](_0x20fea5[_0x2445e2(0xa8)],0x0,0x0),_0x4ef208[_0x2445e2(0xa1)]['drawImage'](_0x4ef208[_0x2445e2(0xb0)],0x0,0x0),_0x20fea5[_0x2445e2(0xa8)]=_0x4ef208['canvasContext']['getImageData'](0x0,0x0,_0x4ef208[_0x2445e2(0xa9)],_0x4ef208[_0x2445e2(0xb2)]),_0x493b76[_0x2445e2(0xac)]()[_0x2445e2(0xa7)](),_0x1ce47f;}export async function psy_seg_overlay_background_with_extra_params(_0x31accd,_0x50e935,_0x3e783d,_0x4ade4f,_0x85a26c,_0x4f40ed=null){const _0x264330=_0x5efd8f;let _0x90542d=![];_0x493b76['engine']()[_0x264330(0xa5)]();const _0x58be49=_0x31accd[_0x264330(0xc2)]===_0x264330(0x9e)?0xa0:0xc0,_0x344d81=_0x31accd[_0x264330(0xc2)]==='tflite'?0x60:0xc0;let _0x2e676f=PsySegBuf(_0x58be49,_0x344d81,0x4,null);return _0x31accd[_0x264330(0xc5)][_0x264330(0x99)]!==null&&await psy_seg_overlay_background_internal(_0x31accd,_0x50e935,_0x3e783d,_0x4ade4f,_0x2e676f,_0x85a26c,_0x4f40ed)[_0x264330(0xa4)](_0x397b98=>{_0x90542d=_0x397b98;})[_0x264330(0xbf)](_0x3e4142=>{}),_0x493b76[_0x264330(0xac)]()['endScope'](),_0x90542d;}export async function psy_seg_blur_background(_0x476b6f,_0x191bc4,_0x458291,_0x3071b6,_0xa6e811=0x9){const _0x29a5ba=_0x5efd8f;let _0x3b8739=![];_0x493b76['engine']()[_0x29a5ba(0xa5)]();const _0x157c25=_0x476b6f['backend']==='tflite'?0xa0:0xc0,_0x10b548=_0x476b6f[_0x29a5ba(0xc2)]===_0x29a5ba(0x9e)?0x60:0xc0;let _0x39c0e8=PsySegBuf(_0x157c25,_0x10b548,0x4,null);return _0x476b6f['SmartEyes'][_0x29a5ba(0x99)]!==null&&await psy_seg_blur_background_internal(_0x476b6f,_0x191bc4,_0x458291,_0x39c0e8,_0x3071b6,_0xa6e811)[_0x29a5ba(0xa4)](_0x3f9fcf=>{_0x3b8739=_0x3f9fcf;})[_0x29a5ba(0xbf)](_0x51039f=>{}),_0x493b76[_0x29a5ba(0xac)]()[_0x29a5ba(0xa7)](),_0x3b8739;}export async function psy_seg_blur_background_with_extra_params(_0x31b0e5,_0x3916be,_0xa8206f,_0x4fc559,_0x1f2731,_0xc83bd9=null){const _0x160a71=_0x5efd8f;let _0x4cdf97=![];_0x493b76[_0x160a71(0xac)]()['startScope']();const _0x254ab6=_0x31b0e5[_0x160a71(0xc2)]===_0x160a71(0x9e)?0xa0:0xc0,_0x675dfe=_0x31b0e5['backend']===_0x160a71(0x9e)?0x60:0xc0;let _0x12dad2=PsySegBuf(_0x254ab6,_0x675dfe,0x4,null);return _0x31b0e5[_0x160a71(0xc5)][_0x160a71(0x99)]!==null&&await psy_seg_blur_background_internal(_0x31b0e5,_0x3916be,_0xa8206f,_0x12dad2,_0x4fc559,_0x1f2731,_0xc83bd9)[_0x160a71(0xa4)](_0xf5cac7=>{_0x4cdf97=_0xf5cac7;})['catch'](_0x1c1a57=>{}),_0x493b76['engine']()[_0x160a71(0xa7)](),_0x4cdf97;}export async function psy_seg_remove_background(_0x4fe201,_0x5f0f11,_0x211d4a,_0x58a11e){const _0x50cd04=_0x5efd8f;if(!_0x4fe201[_0x50cd04(0xc5)]['model'])return;_0x493b76[_0x50cd04(0xac)]()[_0x50cd04(0xa5)]();const _0x2e81ff=_0x4fe201['backend']==='tflite'?0xa0:0xc0,_0x117289=_0x4fe201[_0x50cd04(0xc2)]===_0x50cd04(0x9e)?0x60:0xc0;let _0x573f01=PsySegBuf(_0x2e81ff,_0x117289,0x4,null);const _0x1d9f11=await psy_seg_remove_background_internal(_0x4fe201,_0x5f0f11,_0x211d4a,_0x573f01,_0x58a11e);return _0x493b76[_0x50cd04(0xac)]()[_0x50cd04(0xa7)](),_0x1d9f11;}export async function psy_seg_remove_background_with_extra_params(_0xc98dd7,_0x5526b2,_0x768d8b,_0x4e776a,_0x52f3e8=null){const _0x476ba7=_0x5efd8f;if(!_0xc98dd7[_0x476ba7(0xc5)]['model'])return;_0x493b76[_0x476ba7(0xac)]()[_0x476ba7(0xa5)]();const _0x209e4d=_0xc98dd7[_0x476ba7(0xc2)]===_0x476ba7(0x9e)?0xa0:0xc0,_0x14ba70=_0xc98dd7[_0x476ba7(0xc2)]===_0x476ba7(0x9e)?0x60:0xc0;let _0x148e5a=PsySegBuf(_0x209e4d,_0x14ba70,0x4,null);const _0x3ef747=await psy_seg_remove_background_internal(_0xc98dd7,_0x5526b2,_0x768d8b,_0x148e5a,_0x4e776a,_0x52f3e8);return _0x493b76[_0x476ba7(0xac)]()['endScope'](),_0x3ef747;}export const getVersion=()=>{const _0x341f53=_0x5efd8f;return _0x341f53(0xbe);};