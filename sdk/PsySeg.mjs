const _0x26696c=_0x53a3;(function(_0x5418c4,_0xf2f25a){const _0xb9a210=_0x53a3,_0x21666d=_0x5418c4();while(!![]){try{const _0x573402=parseInt(_0xb9a210(0x7f))/0x1+parseInt(_0xb9a210(0x7e))/0x2+-parseInt(_0xb9a210(0x87))/0x3+-parseInt(_0xb9a210(0x72))/0x4*(parseInt(_0xb9a210(0x93))/0x5)+parseInt(_0xb9a210(0x73))/0x6+-parseInt(_0xb9a210(0x71))/0x7*(-parseInt(_0xb9a210(0x7b))/0x8)+-parseInt(_0xb9a210(0x8d))/0x9;if(_0x573402===_0xf2f25a)break;else _0x21666d['push'](_0x21666d['shift']());}catch(_0x3d70e2){_0x21666d['push'](_0x21666d['shift']());}}}(_0x590d,0xed453));import*as _0x290302 from'@tensorflow/tfjs';import{SmartEyes}from'./ML/ML.js';import{preProcessing}from'./Preprocessing/Preprocessing.js';import{psy_seg_overlay_background_internal,psy_seg_blur_background_internal,psy_seg_remove_background_internal}from'./Effects/Effects.js';import{psy_seg_get_alpha_internal}from'./Effects/Common.js';import{refine}from'./Refinement/Refinement.js';_0x26696c(0x97);export function ColorSpaceType(){return{'COLOR_SPACE_RGBA':0x0,'COLOR_SPACE_BGR':0x1,'COLOR_SPACE_RGB':0x2,'COLOR_SPACE_NV21':0x3,'COLOR_SPACE_NV12':0x4,'COLOR_SPACE_I420':0x5,'COLOR_SPACE_YUY2':0x6};};export function PsySegSetupInfo(_0x3c6930,_0x53c5d4){return{'colorWidth':_0x3c6930,'colorHeight':_0x53c5d4};};export function PsySegExtraParams(_0x27cfa3=0x1){return{'erode':_0x27cfa3};}export function PsySegBuf(_0x1ad321,_0x50ae1a,_0x2194d5,_0x2ece64){return{'width':_0x1ad321,'height':_0x50ae1a,'channels':_0x2194d5,'data':_0x2ece64};};class PsySeg{constructor(_0x51c0d6,_0x40d4e8){const _0x49175b=_0x26696c;this[_0x49175b(0x78)]=_0x51c0d6['colorWidth'],this[_0x49175b(0x83)]=_0x51c0d6['colorHeight'],this['backend']=_0x40d4e8,this[_0x49175b(0x81)]=document[_0x49175b(0x85)](_0x49175b(0x81)),this[_0x49175b(0x81)][_0x49175b(0x78)]=this['width'],this[_0x49175b(0x81)][_0x49175b(0x83)]=this[_0x49175b(0x83)],this[_0x49175b(0x8c)]=this[_0x49175b(0x81)][_0x49175b(0x8b)]('2d'),this['fgCanvas']=document['createElement']('canvas'),this[_0x49175b(0x8e)][_0x49175b(0x78)]=this[_0x49175b(0x78)],this[_0x49175b(0x8e)][_0x49175b(0x83)]=this[_0x49175b(0x83)],this['fgCanvasContext']=this[_0x49175b(0x8e)][_0x49175b(0x8b)]('2d'),this[_0x49175b(0x96)]=null,this[_0x49175b(0x96)]=new SmartEyes(this[_0x49175b(0x7c)]),this['runUE']=this['runUE'][_0x49175b(0x86)](this);}async[_0x26696c(0x95)](_0x45ca2c,_0x5e011b,_0x141e60,_0x18a9a7=![]){const _0x5188b0=_0x26696c;let _0x4cac05=![],_0x184b6e=null;_0x4cac05=![];const _0x4b42f7=this[_0x5188b0(0x7c)]===_0x5188b0(0x80)?0xa0:0xc0,_0x3ee3cb=this[_0x5188b0(0x7c)]===_0x5188b0(0x80)?0x60:0xc0;let _0x399a29={'width':_0x4b42f7,'height':_0x3ee3cb};return await this[_0x5188b0(0x96)][_0x5188b0(0x74)](_0x45ca2c,_0x141e60,_0x18a9a7)['then'](async _0x26b40b=>{const _0x3f310d=_0x5188b0;if(this[_0x3f310d(0x7c)]===_0x3f310d(0x80))_0x5e011b['data']=_0x26b40b,_0x5e011b['width']=_0x399a29[_0x3f310d(0x78)],_0x5e011b[_0x3f310d(0x83)]=_0x399a29[_0x3f310d(0x83)];else{_0x184b6e=_0x290302[_0x3f310d(0x75)](()=>{const _0x1b7642=_0x3f310d;return refine(_0x26b40b['div'](_0x290302['scalar'](0xff)),_0x399a29)[_0x1b7642(0x7a)]([_0x3ee3cb,_0x4b42f7,0x1]);});let _0x4115c6=await _0x290302[_0x3f310d(0x8a)]['toPixels'](_0x184b6e),_0x10a08f=new ImageData(_0x4115c6,_0x4b42f7,_0x3ee3cb),_0x302db8=await preProcessing(_0x10a08f,_0x141e60,{'width':_0x399a29['width'],'height':_0x399a29[_0x3f310d(0x83)]},ColorSpaceType[_0x3f310d(0x84)],{'width':_0x45ca2c[_0x3f310d(0x78)],'height':_0x45ca2c[_0x3f310d(0x83)]});_0x5e011b[_0x3f310d(0x76)]=new ImageData(_0x302db8,_0x45ca2c[_0x3f310d(0x78)],_0x45ca2c[_0x3f310d(0x83)]),_0x5e011b[_0x3f310d(0x78)]=_0x45ca2c['width'],_0x5e011b[_0x3f310d(0x83)]=_0x45ca2c[_0x3f310d(0x83)];}_0x4cac05=!![];})[_0x5188b0(0x8f)](_0x57626b=>{const _0x2db45=_0x5188b0;console[_0x2db45(0x7d)](_0x2db45(0x79)+_0x57626b);}),_0x4cac05;}}export async function psy_seg_create(_0x2efd69){const _0xf3c0da=_0x26696c;return new PsySeg(_0x2efd69,_0xf3c0da(0x80));}export async function psy_seg_create_internal(_0x3e29d5,_0x43e882=_0x26696c(0x80)){return new PsySeg(_0x3e29d5,_0x43e882);}function _0x590d(){const _0x2b1b7c=['reshape','16gsvMbI','backend','log','2861218qbKLLI','239151HwWHeK','tflite','canvas','startScope','height','COLOR_SPACE_RGBA','createElement','bind','3954150xbtjOe','model','putImageData','browser','getContext','canvasContext','4935798jPHbXn','fgCanvas','catch','drawImage','then','callInteger','689950hJLSEP','engine','runUE','SmartEyes','use\x20strict','clearRect','5822768NgVNzA','20FeAONO','1169238YRjVao','run','tidy','data','endScope','width','Cannot\x20get\x20alpha\x20mask\x20due\x20to\x20'];_0x590d=function(){return _0x2b1b7c;};return _0x590d();}export async function psy_seg_destroy(_0x1ee420){const _0x2a837b=_0x26696c;_0x1ee420[_0x2a837b(0x7c)]!==_0x2a837b(0x80)&&_0x1ee420[_0x2a837b(0x96)]['release'](),delete _0x1ee420[_0x2a837b(0x7c)],delete _0x1ee420[_0x2a837b(0x78)],delete _0x1ee420[_0x2a837b(0x83)],delete _0x1ee420[_0x2a837b(0x95)],delete _0x1ee420[_0x2a837b(0x96)];}export async function psy_seg_create_background(_0xf5d406,_0x968612,_0x4d0fe5,_0x3da408){const _0x2b7fc2=_0x26696c;let _0x2b9981=null;return await preProcessing(_0xf5d406,_0x968612,_0x4d0fe5,ColorSpaceType()['COLOR_SPACE_RGB'],_0x3da408)['then'](_0x23c321=>{_0x2b9981=_0x23c321;})[_0x2b7fc2(0x8f)](_0x516aff=>{const _0x54c454=_0x2b7fc2;console[_0x54c454(0x7d)]('Cannot\x20create\x20background\x20due\x20to\x20'+_0x516aff);}),PsySegBuf(_0x3da408['width'],_0x3da408[_0x2b7fc2(0x83)],0x4,_0x2b9981);}export async function psy_seg_get_alpha(_0x27b732,_0x2297c1,_0x381da7,_0x35151f){const _0x4a9d79=_0x26696c;let _0x48bddc=![];_0x290302[_0x4a9d79(0x94)]()[_0x4a9d79(0x82)]();_0x27b732[_0x4a9d79(0x96)][_0x4a9d79(0x88)]!==null&&await psy_seg_get_alpha_internal(_0x27b732,_0x2297c1,_0x381da7,_0x35151f,!![])[_0x4a9d79(0x91)](_0x495358=>{_0x48bddc=_0x495358;})[_0x4a9d79(0x8f)](_0x3235f4=>{const _0x1cb1e9=_0x4a9d79;console[_0x1cb1e9(0x7d)]('Cannot\x20get\x20alpha\x20effects\x20due\x20to\x20'+_0x3235f4);});if(_0x27b732[_0x4a9d79(0x7c)]==='tflite'){let _0x361cac=await preProcessing(_0x35151f[_0x4a9d79(0x76)],_0x381da7,{'width':_0x35151f['width'],'height':_0x35151f[_0x4a9d79(0x83)]},ColorSpaceType[_0x4a9d79(0x84)],{'width':_0x2297c1[_0x4a9d79(0x78)],'height':_0x2297c1['height']});_0x35151f[_0x4a9d79(0x76)]=new ImageData(_0x361cac,_0x2297c1[_0x4a9d79(0x78)],_0x2297c1[_0x4a9d79(0x83)]),_0x35151f['width']=_0x2297c1[_0x4a9d79(0x78)],_0x35151f[_0x4a9d79(0x83)]=_0x2297c1[_0x4a9d79(0x83)];}return _0x290302[_0x4a9d79(0x94)]()[_0x4a9d79(0x77)](),_0x48bddc;}function _0x53a3(_0x243eef,_0x43dd8d){const _0x590d21=_0x590d();return _0x53a3=function(_0x53a307,_0x1f56fd){_0x53a307=_0x53a307-0x70;let _0x26744c=_0x590d21[_0x53a307];return _0x26744c;},_0x53a3(_0x243eef,_0x43dd8d);}export async function psy_seg_overlay_background(_0x45d6e8,_0x2464e8,_0xdae24e,_0x4a3184,_0x401eff){const _0x4c6d8c=_0x26696c;let _0x4e3b7e=![];_0x290302[_0x4c6d8c(0x94)]()[_0x4c6d8c(0x82)]();const _0x1b109e=_0x45d6e8[_0x4c6d8c(0x7c)]===_0x4c6d8c(0x80)?0xa0:0xc0,_0x58c87c=_0x45d6e8[_0x4c6d8c(0x7c)]===_0x4c6d8c(0x80)?0x60:0xc0;let _0x5726c0=PsySegBuf(_0x1b109e,_0x58c87c,0x4,null);return _0x45d6e8[_0x4c6d8c(0x96)][_0x4c6d8c(0x88)]!==null&&await psy_seg_overlay_background_internal(_0x45d6e8,_0x2464e8,_0xdae24e,_0x4a3184,_0x5726c0,_0x401eff)['then'](_0x30285d=>{_0x4e3b7e=_0x30285d;})['catch'](_0x2121b6=>{}),_0x290302[_0x4c6d8c(0x94)]()['endScope'](),_0x4e3b7e;}export async function psy_seg_overlay_background_new(_0x4ba0e5,_0x2d0da1,_0x2d1ca8,_0x2a3738,_0x11546a,_0x1a84a7=null){const _0xbcbd9=_0x26696c;_0x290302[_0xbcbd9(0x94)]()[_0xbcbd9(0x82)]();const _0x265106=_0x4ba0e5[_0xbcbd9(0x7c)]===_0xbcbd9(0x80)?0xa0:0xc0,_0x13596e=_0x4ba0e5['backend']===_0xbcbd9(0x80)?0x60:0xc0;let _0x1c01c7=PsySegBuf(_0x265106,_0x13596e,0x4,null);const _0x12aa90=await psy_seg_remove_background_with_extra_params(_0x4ba0e5,_0x2d0da1,_0x2a3738,_0x11546a,_0x1a84a7);return _0x4ba0e5[_0xbcbd9(0x8c)][_0xbcbd9(0x89)](_0x2d1ca8[_0xbcbd9(0x76)],0x0,0x0),_0x4ba0e5['fgCanvasContext'][_0xbcbd9(0x70)](0x0,0x0,_0x4ba0e5['width'],_0x4ba0e5[_0xbcbd9(0x83)]),_0x4ba0e5['fgCanvasContext'][_0xbcbd9(0x89)](_0x11546a['data'],0x0,0x0),_0x4ba0e5['canvasContext'][_0xbcbd9(0x90)](_0x4ba0e5['fgCanvas'],0x0,0x0),_0x11546a[_0xbcbd9(0x76)]=_0x4ba0e5[_0xbcbd9(0x8c)]['getImageData'](0x0,0x0,_0x4ba0e5[_0xbcbd9(0x78)],_0x4ba0e5['height']),_0x290302['engine']()[_0xbcbd9(0x77)](),_0x12aa90;}export async function psy_seg_overlay_background_with_extra_params(_0x530b3a,_0x29462f,_0x250ef1,_0x50ff8f,_0x1d97ba,_0x373eaa=null){const _0x3b1094=_0x26696c;let _0x1f8440=![];_0x290302['engine']()['startScope']();const _0x1b97b3=_0x530b3a[_0x3b1094(0x7c)]==='tflite'?0xa0:0xc0,_0x13ba04=_0x530b3a[_0x3b1094(0x7c)]===_0x3b1094(0x80)?0x60:0xc0;let _0x4313ce=PsySegBuf(_0x1b97b3,_0x13ba04,0x4,null);return _0x530b3a[_0x3b1094(0x96)][_0x3b1094(0x88)]!==null&&await psy_seg_overlay_background_internal(_0x530b3a,_0x29462f,_0x250ef1,_0x50ff8f,_0x4313ce,_0x1d97ba,_0x373eaa)[_0x3b1094(0x91)](_0x43fa3f=>{_0x1f8440=_0x43fa3f;})[_0x3b1094(0x8f)](_0x4103bb=>{}),_0x290302[_0x3b1094(0x94)]()[_0x3b1094(0x77)](),_0x1f8440;}export async function psy_seg_blur_background(_0x243e09,_0xd21a1f,_0x4822a1,_0x3b6070,_0x2be685=0x9){const _0xb137ac=_0x26696c;let _0xfb2898=![];_0x290302[_0xb137ac(0x94)]()[_0xb137ac(0x82)]();const _0x5b77dd=_0x243e09['backend']==='tflite'?0xa0:0xc0,_0x149647=_0x243e09[_0xb137ac(0x7c)]===_0xb137ac(0x80)?0x60:0xc0;let _0x1b3c29=PsySegBuf(_0x5b77dd,_0x149647,0x4,null);return _0x243e09['SmartEyes'][_0xb137ac(0x88)]!==null&&await psy_seg_blur_background_internal(_0x243e09,_0xd21a1f,_0x4822a1,_0x1b3c29,_0x3b6070,_0x2be685)[_0xb137ac(0x91)](_0x218264=>{_0xfb2898=_0x218264;})[_0xb137ac(0x8f)](_0x47c79c=>{}),_0x290302[_0xb137ac(0x94)]()[_0xb137ac(0x77)](),_0xfb2898;}export async function psy_seg_blur_background_with_extra_params(_0x494e97,_0x4dd973,_0x5df5cd,_0x3be815,_0x59a115,_0x9f8fe6=null){const _0x1d4568=_0x26696c;let _0x19b1b4=![];_0x290302[_0x1d4568(0x94)]()[_0x1d4568(0x82)]();const _0x32c49a=_0x494e97[_0x1d4568(0x7c)]==='tflite'?0xa0:0xc0,_0x280765=_0x494e97['backend']===_0x1d4568(0x80)?0x60:0xc0;let _0x204067=PsySegBuf(_0x32c49a,_0x280765,0x4,null);return _0x494e97[_0x1d4568(0x96)][_0x1d4568(0x88)]!==null&&await psy_seg_blur_background_internal(_0x494e97,_0x4dd973,_0x5df5cd,_0x204067,_0x3be815,_0x59a115,_0x9f8fe6)[_0x1d4568(0x91)](_0x59907d=>{_0x19b1b4=_0x59907d;})[_0x1d4568(0x8f)](_0x11c26b=>{}),_0x290302['engine']()['endScope'](),_0x19b1b4;}export async function psy_seg_remove_background(_0xe3b709,_0x8145d,_0x1c0b55,_0x13c71b){const _0x416b87=_0x26696c;if(!_0xe3b709[_0x416b87(0x96)]['model'])return;_0x290302[_0x416b87(0x94)]()[_0x416b87(0x82)]();const _0x4c0479=_0xe3b709[_0x416b87(0x7c)]===_0x416b87(0x80)?0xa0:0xc0,_0x1fc6c2=_0xe3b709[_0x416b87(0x7c)]===_0x416b87(0x80)?0x60:0xc0;let _0x3d0a4d=PsySegBuf(_0x4c0479,_0x1fc6c2,0x4,null);const _0x43e53f=await psy_seg_remove_background_internal(_0xe3b709,_0x8145d,_0x1c0b55,_0x3d0a4d,_0x13c71b);return _0x290302[_0x416b87(0x94)]()[_0x416b87(0x77)](),_0x43e53f;}export async function psy_seg_remove_background_with_extra_params(_0x5e5aab,_0x356fc9,_0x22d5b3,_0xd30501,_0x2b3e25=null){const _0x230d94=_0x26696c;if(!_0x5e5aab[_0x230d94(0x96)][_0x230d94(0x88)])return;_0x290302[_0x230d94(0x94)]()['startScope']();const _0x399fef=_0x5e5aab[_0x230d94(0x7c)]==='tflite'?0xa0:0xc0,_0xfa343e=_0x5e5aab[_0x230d94(0x7c)]===_0x230d94(0x80)?0x60:0xc0;let _0x290083=PsySegBuf(_0x399fef,_0xfa343e,0x4,null);const _0x8df438=await psy_seg_remove_background_internal(_0x5e5aab,_0x356fc9,_0x22d5b3,_0x290083,_0xd30501,_0x2b3e25);return _0x290302['engine']()['endScope'](),_0x8df438;}export const callInteger=()=>{const _0x1a5039=_0x26696c;return _0x290302[_0x1a5039(0x94)]()[_0x1a5039(0x82)](),console['log'](_0x1a5039(0x92)),_0x290302[_0x1a5039(0x94)]()[_0x1a5039(0x77)](),0x64;};