const _0x839331=_0x4edc;(function(_0x5aade7,_0x14ae25){const _0x174aef=_0x4edc,_0x1e7a53=_0x5aade7();while(!![]){try{const _0x6eec18=-parseInt(_0x174aef(0xdd))/0x1*(-parseInt(_0x174aef(0xd3))/0x2)+parseInt(_0x174aef(0xda))/0x3*(-parseInt(_0x174aef(0xe8))/0x4)+-parseInt(_0x174aef(0x101))/0x5+-parseInt(_0x174aef(0xe6))/0x6+parseInt(_0x174aef(0xd2))/0x7*(parseInt(_0x174aef(0xe5))/0x8)+-parseInt(_0x174aef(0xf7))/0x9+parseInt(_0x174aef(0xee))/0xa;if(_0x6eec18===_0x14ae25)break;else _0x1e7a53['push'](_0x1e7a53['shift']());}catch(_0xb770f7){_0x1e7a53['push'](_0x1e7a53['shift']());}}}(_0x5ca2,0xb939e));import*as _0x23c843 from'@tensorflow/tfjs';import{PsySegBuf,ColorSpaceType}from'../PsySeg.js';import{preProcessing}from'../Preprocessing/Preprocessing.js';import{simd}from'wasm-feature-detect';import _0x5e3454 from'../model/tflite-import/tflite.mjs';import _0x1074be from'../model/tflite-import/tflite-simd.mjs';_0x839331(0xe3);function _0x5ca2(){const _0xb5c584=['width','predict','tflite','data','loadTfLiteModel','now','argMax','270851kWjRMk','8570AMWkUW','loadGraphModel','cast','initTime','_loadModel','COLOR_SPACE_RGBA','logicalOr','209151zkFDAd','equal','release','164GDYDJG','model','segWidth','then','setBackend','_runInference','use\x20strict','HEAPF32','256mbxPgi','8666034ceByCM','default','44xosxYZ','segHeight','runTFJSInference','catch','height','run','24962730UQTvzA','float32','loadTfJsModel','dispose','expandDims','max','startTime','tfjs','type','12067506QtHUof','GET','fromPixels','browser','greater','bind','runTFLiteInference','exp','_getOutputMemoryOffset','_getInputMemoryOffset','632215wjPDRE'];_0x5ca2=function(){return _0xb5c584;};return _0x5ca2();}var TfLiteModel=null,TfJsModel=null;function _0x4edc(_0x372bdb,_0xe56214){const _0x5ca232=_0x5ca2();return _0x4edc=function(_0x4edc73,_0xbb8b4){_0x4edc73=_0x4edc73-0xcb;let _0xc77cb7=_0x5ca232[_0x4edc73];return _0xc77cb7;},_0x4edc(_0x372bdb,_0xe56214);}export class SmartEyes{constructor(_0x1b3336,_0x4f09d8){const _0xc97676=_0x839331;this[_0xc97676(0xf4)]=Date[_0xc97676(0xd0)](),this[_0xc97676(0xd6)]=0x0,this[_0xc97676(0xde)]=null,this['type']=_0x1b3336===_0xc97676(0xcd)?_0xc97676(0xcd):'tfjs',this['segWidth']=_0x1b3336===_0xc97676(0xcd)?0xa0:0xc0,this['segHeight']=_0x1b3336===_0xc97676(0xcd)?0x60:0xc0;if(!_0x4f09d8){if(this[_0xc97676(0xf6)]===_0xc97676(0xcd)&&TfLiteModel!==null){this[_0xc97676(0xde)]=TfLiteModel,this[_0xc97676(0xde)][_0xc97676(0xd7)](0x636c0),this[_0xc97676(0xea)]=this[_0xc97676(0xea)][_0xc97676(0xfc)](this),this[_0xc97676(0xfd)]=this[_0xc97676(0xfd)][_0xc97676(0xfc)](this),this[_0xc97676(0xcf)]=this[_0xc97676(0xcf)]['bind'](this),this[_0xc97676(0xf0)]=this[_0xc97676(0xf0)][_0xc97676(0xfc)](this),this[_0xc97676(0xed)]=this[_0xc97676(0xed)][_0xc97676(0xfc)](this);return;}else{if(this[_0xc97676(0xf6)]===_0xc97676(0xf5)&&TfJsModel!==null){this[_0xc97676(0xde)]=TfJsModel,this[_0xc97676(0xea)]=this[_0xc97676(0xea)][_0xc97676(0xfc)](this),this[_0xc97676(0xfd)]=this[_0xc97676(0xfd)][_0xc97676(0xfc)](this),this[_0xc97676(0xcf)]=this[_0xc97676(0xcf)][_0xc97676(0xfc)](this),this[_0xc97676(0xf0)]=this[_0xc97676(0xf0)][_0xc97676(0xfc)](this),this[_0xc97676(0xed)]=this[_0xc97676(0xed)][_0xc97676(0xfc)](this);return;}}}_0x1b3336==='tflite'?simd()['then'](_0x543209=>{const _0x39e498=_0xc97676;_0x543209?_0x1074be()['then'](_0x49cd96=>{const _0x124c2=_0x4edc;this[_0x124c2(0xcf)](_0x49cd96);})[_0x39e498(0xeb)](_0x356165=>{const _0xf4fd19=_0x39e498;this['initTime']=Date[_0xf4fd19(0xd0)]()-this[_0xf4fd19(0xf4)];}):_0x5e3454()[_0x39e498(0xe0)](_0x542b53=>{const _0x21d44b=_0x39e498;this[_0x21d44b(0xcf)](_0x542b53);})[_0x39e498(0xeb)](_0xa68b84=>{const _0x30ed44=_0x39e498;this['initTime']=Date['now']()-this[_0x30ed44(0xf4)];});})[_0xc97676(0xeb)](_0x135683=>{const _0x543459=_0xc97676;_0x5e3454()[_0x543459(0xe0)](_0x36bc29=>{this['loadTfLiteModel'](_0x36bc29);})[_0x543459(0xeb)](_0x2ad33d=>{const _0x1e084e=_0x543459;this['initTime']=Date['now']()-this[_0x1e084e(0xf4)];});}):this[_0xc97676(0xf0)](),this[_0xc97676(0xea)]=this[_0xc97676(0xea)][_0xc97676(0xfc)](this),this['runTFLiteInference']=this[_0xc97676(0xfd)][_0xc97676(0xfc)](this),this[_0xc97676(0xcf)]=this[_0xc97676(0xcf)][_0xc97676(0xfc)](this),this[_0xc97676(0xf0)]=this[_0xc97676(0xf0)][_0xc97676(0xfc)](this),this[_0xc97676(0xed)]=this['run']['bind'](this);}[_0x839331(0xf0)](){const _0x1fb5f4=_0x839331;let _0xb9a480='https://psyjs-cdn.nuvixa.com/model.json',_0x585a3d=new Headers(),_0x449315={'method':_0x1fb5f4(0xf8),'headers':_0x585a3d,'mode':'cors','cache':_0x1fb5f4(0xe7)};_0x23c843[_0x1fb5f4(0xd4)](_0xb9a480,{'requestInit':_0x449315})[_0x1fb5f4(0xe0)](_0x311601=>{const _0x2b8704=_0x1fb5f4;_0x23c843[_0x2b8704(0xe1)]('webgl'),this['model']=_0x311601,TfJsModel=_0x311601,this['initTime']=Date[_0x2b8704(0xd0)]()-this[_0x2b8704(0xf4)];})['catch'](_0x170829=>{const _0x2bb592=_0x1fb5f4;this[_0x2bb592(0xd6)]=Date[_0x2bb592(0xd0)]()-this[_0x2bb592(0xf4)];});}['loadTfLiteModel'](_0x670baf){const _0xec6e2c=_0x839331;this[_0xec6e2c(0xde)]=_0x670baf,TfLiteModel=_0x670baf;let _0x37c6b4=this[_0xec6e2c(0xde)]['_getModelBufferMemoryOffset'](),_0x181e9c=this[_0xec6e2c(0xde)][_0xec6e2c(0xd7)](0x636c0);this['initTime']=Date[_0xec6e2c(0xd0)]()-this[_0xec6e2c(0xf4)];}async[_0x839331(0xea)](_0x479ffb){const _0x3f3faf=_0x839331;let _0x141135=null;const _0x1b0ca2=await _0x23c843[_0x3f3faf(0xfa)][_0x3f3faf(0xf9)](_0x479ffb[_0x3f3faf(0xce)]);try{const _0x1c314f=_0x1b0ca2[_0x3f3faf(0xf2)](0x0);var _0x3642bc=await this['model'][_0x3f3faf(0xcc)](_0x23c843['cast'](_0x1c314f,'int32'));_0x3642bc=_0x3642bc[_0x3f3faf(0xd1)](0x3)['expandDims'](0x3);const _0x2692ff=_0x3642bc[_0x3f3faf(0xfb)](0x3),_0x2dc3d2=_0x3642bc['equal'](0x1),_0x4b024b=_0x3642bc[_0x3f3faf(0xdb)](0x2),_0x2a7d36=_0x2692ff[_0x3f3faf(0xd9)](_0x2dc3d2),_0x2f714e=_0x2a7d36[_0x3f3faf(0xd9)](_0x4b024b);_0x141135=_0x23c843[_0x3f3faf(0xd5)](_0x2f714e,_0x3f3faf(0xef)),_0x2692ff[_0x3f3faf(0xf1)](),_0x2dc3d2[_0x3f3faf(0xf1)](),_0x4b024b[_0x3f3faf(0xf1)](),_0x2a7d36[_0x3f3faf(0xf1)](),_0x2f714e[_0x3f3faf(0xf1)](),_0x1c314f['dispose'](),_0x3642bc[_0x3f3faf(0xf1)]();}catch(_0xf442a4){}return _0x141135;}async[_0x839331(0xfd)](_0x3a9436,_0x292c7c=![]){const _0x42c5e8=_0x839331;let _0x1f5efe=this[_0x42c5e8(0xde)][_0x42c5e8(0x100)]()/0x4,_0x5d31e3=this[_0x42c5e8(0xde)][_0x42c5e8(0xff)]()/0x4,_0x466b7f=_0x3a9436[_0x42c5e8(0xce)],_0x143545=this[_0x42c5e8(0xdf)]*this[_0x42c5e8(0xe9)];for(let _0x59891c=0x0;_0x59891c<_0x143545;_0x59891c++){this[_0x42c5e8(0xde)][_0x42c5e8(0xe4)][_0x1f5efe+_0x59891c*0x3]=_0x466b7f[_0x42c5e8(0xce)][_0x59891c*0x4]/0xff,this[_0x42c5e8(0xde)][_0x42c5e8(0xe4)][_0x1f5efe+_0x59891c*0x3+0x1]=_0x466b7f[_0x42c5e8(0xce)][_0x59891c*0x4+0x1]/0xff,this['model'][_0x42c5e8(0xe4)][_0x1f5efe+_0x59891c*0x3+0x2]=_0x466b7f[_0x42c5e8(0xce)][_0x59891c*0x4+0x2]/0xff;}this[_0x42c5e8(0xde)][_0x42c5e8(0xe2)]();let _0x18c40f=new ImageData(this[_0x42c5e8(0xdf)],this[_0x42c5e8(0xe9)]),_0x19f1b8=new ImageData(this[_0x42c5e8(0xdf)],this[_0x42c5e8(0xe9)]);for(let _0x50d7fa=0x0;_0x50d7fa<_0x143545;_0x50d7fa++){const _0x362715=_0x292c7c?this[_0x42c5e8(0xde)][_0x42c5e8(0xe4)][_0x5d31e3+_0x50d7fa*0x2+0x1]:this['model'][_0x42c5e8(0xe4)][_0x5d31e3+_0x50d7fa*0x2],_0x28c0a4=_0x292c7c?this[_0x42c5e8(0xde)][_0x42c5e8(0xe4)][_0x5d31e3+_0x50d7fa*0x2]:this[_0x42c5e8(0xde)][_0x42c5e8(0xe4)][_0x5d31e3+_0x50d7fa*0x2+0x1],_0x3b596b=Math[_0x42c5e8(0xf3)](_0x362715,_0x28c0a4),_0x2799f5=Math[_0x42c5e8(0xfe)](_0x362715-_0x3b596b),_0x43cb6e=Math[_0x42c5e8(0xfe)](_0x28c0a4-_0x3b596b);_0x18c40f[_0x42c5e8(0xce)][_0x50d7fa*0x4+0x3]=0xff*_0x43cb6e/(_0x2799f5+_0x43cb6e),!_0x292c7c&&(_0x18c40f[_0x42c5e8(0xce)][_0x50d7fa*0x4+0x2]=0xff*_0x43cb6e/(_0x2799f5+_0x43cb6e),_0x18c40f[_0x42c5e8(0xce)][_0x50d7fa*0x4+0x1]=0xff*_0x43cb6e/(_0x2799f5+_0x43cb6e),_0x18c40f[_0x42c5e8(0xce)][_0x50d7fa*0x4]=0xff*_0x43cb6e/(_0x2799f5+_0x43cb6e)),_0x19f1b8['data'][_0x50d7fa*0x4+0x3]=0xff*_0x43cb6e/(_0x2799f5+_0x43cb6e);}return _0x18c40f;}async[_0x839331(0xed)](_0x361a33,_0x2b163e,_0x1dd01b=![]){const _0x57830f=_0x839331;let _0x296f10=null;const _0x4e65cc=this[_0x57830f(0xf6)]==='tflite'?0xa0:0xc0,_0x373aa2=this['type']==='tflite'?0x60:0xc0;let _0x4c1f6b=await preProcessing(_0x361a33[_0x57830f(0xce)],_0x2b163e,{'width':_0x361a33[_0x57830f(0xcb)],'height':_0x361a33[_0x57830f(0xec)]},ColorSpaceType[_0x57830f(0xd8)],{'width':_0x4e65cc,'height':_0x373aa2});if(_0x4c1f6b===null)return null;let _0x5934d2=new ImageData(_0x4c1f6b,_0x4e65cc,_0x373aa2),_0x2ee455=PsySegBuf(_0x361a33[_0x57830f(0xcb)],_0x361a33[_0x57830f(0xec)],0x4,_0x5934d2);return this[_0x57830f(0xf6)]===_0x57830f(0xcd)?await this[_0x57830f(0xfd)](_0x2ee455,_0x1dd01b)[_0x57830f(0xe0)](_0x5dd870=>{_0x296f10=_0x5dd870;})[_0x57830f(0xeb)](_0x462b29=>{}):await this['runTFJSInference'](_0x2ee455)[_0x57830f(0xe0)](_0x43399c=>{_0x296f10=_0x43399c;})[_0x57830f(0xeb)](_0xcea610=>{}),_0x296f10;}async[_0x839331(0xdc)](){const _0x2b8351=_0x839331;delete this['model'],delete this['segHeight'],delete this[_0x2b8351(0xdf)],delete this[_0x2b8351(0xf6)],delete this[_0x2b8351(0xea)],delete this['runTFLiteInference'],delete this[_0x2b8351(0xcf)],delete this[_0x2b8351(0xf0)],delete this[_0x2b8351(0xed)];}}