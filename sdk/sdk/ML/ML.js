const _0x310504=_0x1853;(function(_0x4a8989,_0x34fe34){const _0x5ad9d4=_0x1853,_0x285388=_0x4a8989();while(!![]){try{const _0x379f26=parseInt(_0x5ad9d4(0x141))/0x1*(-parseInt(_0x5ad9d4(0x181))/0x2)+parseInt(_0x5ad9d4(0x170))/0x3*(parseInt(_0x5ad9d4(0x17b))/0x4)+parseInt(_0x5ad9d4(0x158))/0x5*(parseInt(_0x5ad9d4(0x13a))/0x6)+parseInt(_0x5ad9d4(0x169))/0x7+parseInt(_0x5ad9d4(0x140))/0x8+-parseInt(_0x5ad9d4(0x17d))/0x9+-parseInt(_0x5ad9d4(0x13e))/0xa;if(_0x379f26===_0x34fe34)break;else _0x285388['push'](_0x285388['shift']());}catch(_0x565d22){_0x285388['push'](_0x285388['shift']());}}}(_0xd73f,0xc3087));import*as _0xce1c74 from'@tensorflow/tfjs';import{PsySegBuf,ColorSpaceType}from'../PsySeg.js';import{preProcessing}from'../Preprocessing/Preprocessing.js';function _0x1853(_0x2c2a09,_0x44def5){const _0xd73f5d=_0xd73f();return _0x1853=function(_0x18531c,_0x5cc807){_0x18531c=_0x18531c-0x133;let _0x262332=_0xd73f5d[_0x18531c];return _0x262332;},_0x1853(_0x2c2a09,_0x44def5);}import _0x25656c from'wasm-feature-detect';import _0x12d8e9 from'../model/tflite-import/tflite.mjs';import _0x1790c4 from'../model/tflite-import/tflite-simd.mjs';_0x310504(0x160);function _0xd73f(){const _0x14e416=['release','Output\x20width:','_loadModel','default','cast','greater','197994xyRYYc','Cannot\x20check\x20SIMD\x20support\x20by\x20browsers\x20due\x20to\x20','log','expandDims','tflite','data','loadTfJsModel','exp','model','height','_getOutputWidth','20LJVEfU','type','3589668PPZjMK','Loading\x20model\x20error\x20due\x20to\x20','predict','then','1190LqnVln','Input\x20width:','loadTfLiteModel','initTime','runTFJSInference','_getInputMemoryOffset','segWidth','Model\x20load\x20result:','889014uUDMPO','float32','https://psyjs-cdn.nuvixa.com/model.json','tfjs','6897420jrkOIp','_getModelBufferMemoryOffset','7856336WUgNYD','2495KScMkh','Cannot\x20get\x20inference\x20due\x20to\x20','webgl','segHeight','bind','_getInputChannelCount','_getOutputMemoryOffset','Create\x20tflite\x20module\x20failed\x20due\x20to\x20','cors','run','Input\x20memory\x20offset:','setBackend','logicalOr','now','_getOutputHeight','GET','max','equal','Input\x20channels:','dispose','_getInputHeight','_getInputWidth','SIMD\x20is\x20supported\x20by\x20browser','40rJKkfc','startTime','Model\x20buffer\x20memory\x20offset:','runTFLiteInference','SIMD\x20is\x20not\x20supported\x20by\x20browser','Output\x20channels:','HEAPF32','loadGraphModel','use\x20strict','browser','Output\x20memory\x20offset:','Output\x20height:','_getOutputChannelCount','catch','fromPixels','width','_runInference','6122130XvPXWc'];_0xd73f=function(){return _0x14e416;};return _0xd73f();}var TfLiteModel=null,TfJsModel=null;export class SmartEyes{constructor(_0x366aeb,_0x55113d){const _0x17180d=_0x310504;this[_0x17180d(0x159)]=Date[_0x17180d(0x14e)](),this[_0x17180d(0x135)]=0x0,this['model']=null,this['type']=_0x366aeb===_0x17180d(0x174)?'tflite':_0x17180d(0x13d),this[_0x17180d(0x138)]=_0x366aeb===_0x17180d(0x174)?0xa0:0xc0,this[_0x17180d(0x144)]=_0x366aeb===_0x17180d(0x174)?0x60:0xc0;if(!_0x55113d){if(this[_0x17180d(0x17c)]===_0x17180d(0x174)&&TfLiteModel!==null){this[_0x17180d(0x178)]=TfLiteModel,this[_0x17180d(0x178)][_0x17180d(0x16c)](0x636c0),this['runTFJSInference']=this['runTFJSInference'][_0x17180d(0x145)](this),this[_0x17180d(0x15b)]=this[_0x17180d(0x15b)][_0x17180d(0x145)](this),this[_0x17180d(0x134)]=this['loadTfLiteModel'][_0x17180d(0x145)](this),this['loadTfJsModel']=this[_0x17180d(0x176)][_0x17180d(0x145)](this),this[_0x17180d(0x14a)]=this['run']['bind'](this);return;}else{if(this[_0x17180d(0x17c)]===_0x17180d(0x13d)&&TfJsModel!==null){this[_0x17180d(0x178)]=TfJsModel,this[_0x17180d(0x136)]=this[_0x17180d(0x136)][_0x17180d(0x145)](this),this[_0x17180d(0x15b)]=this[_0x17180d(0x15b)][_0x17180d(0x145)](this),this[_0x17180d(0x134)]=this['loadTfLiteModel'][_0x17180d(0x145)](this),this[_0x17180d(0x176)]=this[_0x17180d(0x176)]['bind'](this),this['run']=this[_0x17180d(0x14a)][_0x17180d(0x145)](this);return;}}}_0x366aeb===_0x17180d(0x174)?_0x25656c()[_0x17180d(0x180)](_0x47e064=>{const _0x1c5e72=_0x17180d;_0x47e064?(console[_0x1c5e72(0x172)](_0x1c5e72(0x157)),_0x1790c4()[_0x1c5e72(0x180)](_0x3d3efd=>{const _0xac2c1e=_0x1c5e72;this[_0xac2c1e(0x134)](_0x3d3efd);})[_0x1c5e72(0x165)](_0x4f2543=>{const _0xf6b161=_0x1c5e72;this[_0xf6b161(0x135)]=Date[_0xf6b161(0x14e)]()-this[_0xf6b161(0x159)],console[_0xf6b161(0x172)](_0xf6b161(0x148)+_0x4f2543);})):(console[_0x1c5e72(0x172)](_0x1c5e72(0x15c)),_0x12d8e9()[_0x1c5e72(0x180)](_0x8e61b4=>{const _0x2f6984=_0x1c5e72;this[_0x2f6984(0x134)](_0x8e61b4);})[_0x1c5e72(0x165)](_0x2ad6a3=>{const _0x206a7f=_0x1c5e72;this['initTime']=Date[_0x206a7f(0x14e)]()-this[_0x206a7f(0x159)],console[_0x206a7f(0x172)]('Create\x20tflite\x20module\x20failed\x20due\x20to\x20'+_0x2ad6a3);}));})[_0x17180d(0x165)](_0x532fbb=>{const _0x5e72c4=_0x17180d;console[_0x5e72c4(0x172)](_0x5e72c4(0x171)+_0x532fbb),_0x12d8e9()[_0x5e72c4(0x180)](_0x5ec728=>{const _0x20f6f0=_0x5e72c4;this[_0x20f6f0(0x134)](_0x5ec728);})[_0x5e72c4(0x165)](_0x6a6ac4=>{const _0x3d4a96=_0x5e72c4;this[_0x3d4a96(0x135)]=Date[_0x3d4a96(0x14e)]()-this[_0x3d4a96(0x159)],console['log']('Create\x20tflite\x20module\x20failed\x20due\x20to\x20'+_0x6a6ac4);});}):this[_0x17180d(0x176)](),this[_0x17180d(0x136)]=this['runTFJSInference'][_0x17180d(0x145)](this),this['runTFLiteInference']=this[_0x17180d(0x15b)]['bind'](this),this[_0x17180d(0x134)]=this['loadTfLiteModel']['bind'](this),this['loadTfJsModel']=this[_0x17180d(0x176)][_0x17180d(0x145)](this),this[_0x17180d(0x14a)]=this[_0x17180d(0x14a)]['bind'](this);}[_0x310504(0x176)](){const _0x1a7734=_0x310504;let _0xddd570=_0x1a7734(0x13c),_0x1078a4=new Headers(),_0x754821={'method':_0x1a7734(0x150),'headers':_0x1078a4,'mode':_0x1a7734(0x149),'cache':_0x1a7734(0x16d)};_0xce1c74[_0x1a7734(0x15f)](_0xddd570,{'requestInit':_0x754821})[_0x1a7734(0x180)](_0x5ab7cd=>{const _0x49b8c3=_0x1a7734;_0xce1c74[_0x49b8c3(0x14c)](_0x49b8c3(0x143)),this['model']=_0x5ab7cd,TfJsModel=_0x5ab7cd,console[_0x49b8c3(0x172)]('Current\x20backend\x20is:\x20'+_0xce1c74['getBackend']()),this[_0x49b8c3(0x135)]=Date['now']()-this[_0x49b8c3(0x159)];})['catch'](_0x3dfc76=>{const _0x1febbe=_0x1a7734;this[_0x1febbe(0x135)]=Date[_0x1febbe(0x14e)]()-this[_0x1febbe(0x159)],console[_0x1febbe(0x172)](_0x1febbe(0x17e)+_0x3dfc76);});}['loadTfLiteModel'](_0x38292f){const _0x16d35a=_0x310504;this[_0x16d35a(0x178)]=_0x38292f,TfLiteModel=_0x38292f;let _0x20e2c9=this['model'][_0x16d35a(0x13f)](),_0x6eed8b=this[_0x16d35a(0x178)]['_loadModel'](0x636c0);this['initTime']=Date[_0x16d35a(0x14e)]()-this[_0x16d35a(0x159)],console[_0x16d35a(0x172)]('modeling\x20model'),console['log'](_0x16d35a(0x15a),_0x20e2c9),console[_0x16d35a(0x172)](_0x16d35a(0x139),_0x6eed8b),console[_0x16d35a(0x172)](_0x16d35a(0x14b),this['model'][_0x16d35a(0x137)]()),console[_0x16d35a(0x172)]('Input\x20height:',this['model'][_0x16d35a(0x155)]()),console[_0x16d35a(0x172)](_0x16d35a(0x133),this[_0x16d35a(0x178)][_0x16d35a(0x156)]()),console['log'](_0x16d35a(0x153),this['model'][_0x16d35a(0x146)]()),console[_0x16d35a(0x172)](_0x16d35a(0x162),this[_0x16d35a(0x178)][_0x16d35a(0x147)]()),console[_0x16d35a(0x172)](_0x16d35a(0x163),this[_0x16d35a(0x178)][_0x16d35a(0x14f)]()),console[_0x16d35a(0x172)](_0x16d35a(0x16b),this[_0x16d35a(0x178)][_0x16d35a(0x17a)]()),console[_0x16d35a(0x172)](_0x16d35a(0x15d),this['model'][_0x16d35a(0x164)]());}async[_0x310504(0x136)](_0x3d655c){const _0xecfe79=_0x310504;let _0x1a678f=null;const _0x355d37=await _0xce1c74[_0xecfe79(0x161)][_0xecfe79(0x166)](_0x3d655c[_0xecfe79(0x175)]);try{const _0x11506=_0x355d37[_0xecfe79(0x173)](0x0);var _0x1ac616=await this[_0xecfe79(0x178)][_0xecfe79(0x17f)](_0xce1c74['cast'](_0x11506,'int32'));_0x1ac616=_0x1ac616['argMax'](0x3)[_0xecfe79(0x173)](0x3);const _0x192751=_0x1ac616[_0xecfe79(0x16f)](0x3),_0xbf7db5=_0x1ac616[_0xecfe79(0x152)](0x1),_0x2b84ef=_0x1ac616['equal'](0x2),_0x568986=_0x192751['logicalOr'](_0xbf7db5),_0x12df9c=_0x568986[_0xecfe79(0x14d)](_0x2b84ef);_0x1a678f=_0xce1c74[_0xecfe79(0x16e)](_0x12df9c,_0xecfe79(0x13b)),_0x192751[_0xecfe79(0x154)](),_0xbf7db5[_0xecfe79(0x154)](),_0x2b84ef['dispose'](),_0x568986[_0xecfe79(0x154)](),_0x12df9c[_0xecfe79(0x154)](),_0x11506[_0xecfe79(0x154)](),_0x1ac616[_0xecfe79(0x154)]();}catch(_0x97a06f){console[_0xecfe79(0x172)]('Cannot\x20get\x20alpha\x20mask\x20due\x20to\x20DNN\x20issue\x20'+_0x97a06f);}return _0x1a678f;}async[_0x310504(0x15b)](_0x46b6c1,_0x5510d6=![]){const _0x481e86=_0x310504;let _0x183b44=this[_0x481e86(0x178)][_0x481e86(0x137)]()/0x4,_0x49ea7b=this[_0x481e86(0x178)][_0x481e86(0x147)]()/0x4,_0x1652d0=_0x46b6c1[_0x481e86(0x175)],_0x136834=this[_0x481e86(0x138)]*this[_0x481e86(0x144)];for(let _0x1180be=0x0;_0x1180be<_0x136834;_0x1180be++){this[_0x481e86(0x178)][_0x481e86(0x15e)][_0x183b44+_0x1180be*0x3]=_0x1652d0[_0x481e86(0x175)][_0x1180be*0x4]/0xff,this[_0x481e86(0x178)][_0x481e86(0x15e)][_0x183b44+_0x1180be*0x3+0x1]=_0x1652d0[_0x481e86(0x175)][_0x1180be*0x4+0x1]/0xff,this[_0x481e86(0x178)][_0x481e86(0x15e)][_0x183b44+_0x1180be*0x3+0x2]=_0x1652d0['data'][_0x1180be*0x4+0x2]/0xff;}this[_0x481e86(0x178)][_0x481e86(0x168)]();let _0x59d742=new ImageData(this[_0x481e86(0x138)],this[_0x481e86(0x144)]),_0x58bda0=new ImageData(this[_0x481e86(0x138)],this[_0x481e86(0x144)]);for(let _0x58adaf=0x0;_0x58adaf<_0x136834;_0x58adaf++){const _0xe75b87=_0x5510d6?this['model'][_0x481e86(0x15e)][_0x49ea7b+_0x58adaf*0x2+0x1]:this[_0x481e86(0x178)][_0x481e86(0x15e)][_0x49ea7b+_0x58adaf*0x2],_0x1176cf=_0x5510d6?this[_0x481e86(0x178)][_0x481e86(0x15e)][_0x49ea7b+_0x58adaf*0x2]:this['model'][_0x481e86(0x15e)][_0x49ea7b+_0x58adaf*0x2+0x1],_0x81cd99=Math[_0x481e86(0x151)](_0xe75b87,_0x1176cf),_0x46cbf4=Math[_0x481e86(0x177)](_0xe75b87-_0x81cd99),_0x4a5773=Math['exp'](_0x1176cf-_0x81cd99);_0x59d742[_0x481e86(0x175)][_0x58adaf*0x4+0x3]=0xff*_0x4a5773/(_0x46cbf4+_0x4a5773),!_0x5510d6&&(_0x59d742['data'][_0x58adaf*0x4+0x2]=0xff*_0x4a5773/(_0x46cbf4+_0x4a5773),_0x59d742[_0x481e86(0x175)][_0x58adaf*0x4+0x1]=0xff*_0x4a5773/(_0x46cbf4+_0x4a5773),_0x59d742[_0x481e86(0x175)][_0x58adaf*0x4]=0xff*_0x4a5773/(_0x46cbf4+_0x4a5773)),_0x58bda0[_0x481e86(0x175)][_0x58adaf*0x4+0x3]=0xff*_0x4a5773/(_0x46cbf4+_0x4a5773);}return _0x59d742;}async[_0x310504(0x14a)](_0x3f036a,_0x8d8241,_0x35b0ae=![]){const _0x4ac9fe=_0x310504;let _0x636efd=null;const _0x271c7f=this['type']===_0x4ac9fe(0x174)?0xa0:0xc0,_0x4f06ff=this[_0x4ac9fe(0x17c)]==='tflite'?0x60:0xc0;let _0x3ebf7c=await preProcessing(_0x3f036a[_0x4ac9fe(0x175)],_0x8d8241,{'width':_0x3f036a[_0x4ac9fe(0x167)],'height':_0x3f036a[_0x4ac9fe(0x179)]},ColorSpaceType['COLOR_SPACE_RGBA'],{'width':_0x271c7f,'height':_0x4f06ff});if(_0x3ebf7c===null)return null;let _0x1ffe19=new ImageData(_0x3ebf7c,_0x271c7f,_0x4f06ff),_0x5b03d0=PsySegBuf(_0x3f036a[_0x4ac9fe(0x167)],_0x3f036a[_0x4ac9fe(0x179)],0x4,_0x1ffe19);return this[_0x4ac9fe(0x17c)]===_0x4ac9fe(0x174)?await this['runTFLiteInference'](_0x5b03d0,_0x35b0ae)[_0x4ac9fe(0x180)](_0x596de6=>{_0x636efd=_0x596de6;})[_0x4ac9fe(0x165)](_0x3b1380=>{const _0x36643a=_0x4ac9fe;console[_0x36643a(0x172)](_0x36643a(0x142)+_0x3b1380);}):await this[_0x4ac9fe(0x136)](_0x5b03d0)['then'](_0x209761=>{_0x636efd=_0x209761;})[_0x4ac9fe(0x165)](_0x125a66=>{const _0x1c69e2=_0x4ac9fe;console[_0x1c69e2(0x172)](_0x1c69e2(0x142)+_0x125a66);}),_0x636efd;}async[_0x310504(0x16a)](){const _0x3b1e41=_0x310504;delete this[_0x3b1e41(0x178)],delete this['segHeight'],delete this[_0x3b1e41(0x138)],delete this[_0x3b1e41(0x17c)],delete this['runTFJSInference'],delete this[_0x3b1e41(0x15b)],delete this[_0x3b1e41(0x134)],delete this['loadTfJsModel'],delete this[_0x3b1e41(0x14a)];}}