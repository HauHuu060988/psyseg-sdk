(function(_0x15da74,_0x12f9a0){const _0x1d4d8d=_0x146f,_0x46efef=_0x15da74();while(!![]){try{const _0x18b781=parseInt(_0x1d4d8d(0xd1))/0x1*(-parseInt(_0x1d4d8d(0xd4))/0x2)+parseInt(_0x1d4d8d(0xd7))/0x3*(parseInt(_0x1d4d8d(0xd5))/0x4)+parseInt(_0x1d4d8d(0xcf))/0x5+-parseInt(_0x1d4d8d(0xcd))/0x6*(-parseInt(_0x1d4d8d(0xb8))/0x7)+-parseInt(_0x1d4d8d(0xc2))/0x8+parseInt(_0x1d4d8d(0xc7))/0x9*(-parseInt(_0x1d4d8d(0xc8))/0xa)+parseInt(_0x1d4d8d(0xe1))/0xb;if(_0x18b781===_0x12f9a0)break;else _0x46efef['push'](_0x46efef['shift']());}catch(_0x5cc958){_0x46efef['push'](_0x46efef['shift']());}}}(_0x1d48,0x37da3));import*as _0x2283b3 from'@tensorflow/tfjs';function _0x146f(_0x3d1b0e,_0x4512d2){const _0x1d4866=_0x1d48();return _0x146f=function(_0x146f80,_0xd823ed){_0x146f80=_0x146f80-0xb5;let _0x2c931d=_0x1d4866[_0x146f80];return _0x2c931d;},_0x146f(_0x3d1b0e,_0x4512d2);}import{MergeBlending,psy_seg_get_alpha_internal}from'./Common.js';function _0x1d48(){const _0x14960a=['Cannot\x20get\x20alpha\x20mask\x20due\x20to\x20','catch','_blurBackground','browser','height','201718khSMQU','HEAP8','Cannot\x20get\x20alpha\x20mask\x20without\x20error\x20notification','pow','7RBnArJ','set','width','scalar','tidy','then','_get_buffer_size','depthwiseConv2d','data','div','1399552DqUHCn','buffer','resizeBilinear','_blurBackgroundLite','erode','123156nLISjA','290PSwelR','cannot\x20get\x20alpha\x20mask\x20due\x20to\x20','floor','Input\x20has\x20a\x20problem,\x20please\x20re-check','tflite','2150298SmEMJI','valid','913125lpUJeP','mul','1QCsLJN','log','sum','43864whyQdZ','4qdqjdQ','_destroy_buffer','789411VAFcxF','outerProduct','fromPixels','exp','_create_buffer'];_0x1d48=function(){return _0x14960a;};return _0x1d48();}function get1dGaussianKernel(_0x3dd73d,_0x211a1e){const _0x4722e4=_0x146f;let _0x494aa6=_0x2283b3['range'](Math['floor'](-_0x3dd73d/0x2)+0x1,Math[_0x4722e4(0xca)](_0x3dd73d/0x2)+0x1);return _0x494aa6=_0x2283b3[_0x4722e4(0xb7)](_0x494aa6,0x2),_0x494aa6=_0x2283b3[_0x4722e4(0xda)](_0x494aa6[_0x4722e4(0xc1)](-0x2*(_0x211a1e*_0x211a1e))),_0x494aa6=_0x494aa6[_0x4722e4(0xc1)](_0x2283b3[_0x4722e4(0xd3)](_0x494aa6)),_0x494aa6;}function get2dGaussianKernel(_0x490b80,_0x1c1cc2){const _0x599bd7=_0x146f;_0x1c1cc2=_0x1c1cc2||0.3*((_0x490b80-0x1)*0.5-0x1)+0.8;let _0x2a1c73=get1dGaussianKernel(_0x490b80,_0x1c1cc2);return _0x2283b3[_0x599bd7(0xd8)](_0x2a1c73,_0x2a1c73);}function getGaussianKernel(_0x27add0,_0x195786){const _0x460553=_0x146f;return _0x2283b3[_0x460553(0xbc)](()=>{let _0x19272a=get2dGaussianKernel(_0x27add0,_0x195786),_0x3e02a7=_0x2283b3['stack']([_0x19272a,_0x19272a,_0x19272a]);return _0x2283b3['reshape'](_0x3e02a7,[_0x27add0,_0x27add0,0x3,0x1]);});}function Blurring(_0x2990af,_0x2f0c13,_0x59a1c2,_0x34c33f){const _0x336699=_0x146f,_0x5cf952=_0x2283b3[_0x336699(0xbc)](()=>{const _0x2065b1=_0x336699,_0x16691b=getGaussianKernel(_0x2f0c13,0x7),_0x3a6a49=_0x2283b3[_0x2065b1(0xbf)](_0x2990af,_0x16691b,0x1,_0x2065b1(0xce))[_0x2065b1(0xc4)]([_0x34c33f,_0x59a1c2]);return _0x3a6a49;});return _0x5cf952;}export async function BlurBackgroundGPU(_0x4d4903,_0x6d5fba,_0xdac9ba,_0x32527d,_0x5567db,_0x415b3c,_0x2682f7=null){const _0x2d2738=_0x146f;let _0x1c74a3=![],_0x467471=null,_0x3164d7=null;try{_0x6d5fba[_0x2d2738(0xc0)]!==null?await psy_seg_get_alpha_internal(_0x4d4903,_0x6d5fba,_0xdac9ba,_0x32527d)[_0x2d2738(0xbd)](async _0x171d4f=>{const _0x4b516b=_0x2d2738;if(_0x171d4f){_0x467471=await _0x2283b3['browser'][_0x4b516b(0xd9)](_0x6d5fba[_0x4b516b(0xc0)])['div'](_0x2283b3[_0x4b516b(0xbb)](0xff)),_0x3164d7=await _0x2283b3[_0x4b516b(0xdf)][_0x4b516b(0xd9)](_0x32527d[_0x4b516b(0xc0)])[_0x4b516b(0xc1)](_0x2283b3['scalar'](0xff));const _0x5a7e11=Blurring(_0x467471,_0x415b3c,_0x6d5fba['width'],_0x6d5fba[_0x4b516b(0xe0)]),_0x45646e=MergeBlending(_0x467471,_0x5a7e11,_0x3164d7);let _0x538ea4=await _0x2283b3[_0x4b516b(0xdf)]['toPixels'](_0x45646e[_0x4b516b(0xd0)](_0x2283b3[_0x4b516b(0xbb)](0.96)));_0x5567db[_0x4b516b(0xc0)]=new ImageData(_0x538ea4,_0x6d5fba[_0x4b516b(0xba)],_0x6d5fba['height']),_0x1c74a3=!![];}else console[_0x4b516b(0xd2)](_0x4b516b(0xb6));})[_0x2d2738(0xdd)](_0x3daff1=>{const _0x4d4fb5=_0x2d2738;console[_0x4d4fb5(0xd2)](_0x4d4fb5(0xc9)+_0x3daff1);}):console[_0x2d2738(0xd2)](_0x2d2738(0xcb));}catch(_0x21f1dc){console['log'](_0x2d2738(0xdc)+_0x21f1dc);}return _0x1c74a3;}export async function BlurBackgroundWASM(_0x550cc8,_0x10f089,_0x14fda1,_0x5360d5,_0x230a6b,_0x55332a,_0x394178,_0x5a45d9=null){const _0x1cf34c=_0x146f;let _0xec07d0=![],_0x4326fd,_0x4647b6,_0x467e71=null,_0x350daf=null,_0x26acee=null,_0x2a344c=null;try{_0x10f089[_0x1cf34c(0xc0)]!==null?await psy_seg_get_alpha_internal(_0x550cc8,_0x10f089,_0x14fda1,_0x5360d5)['then'](async _0x3c20f4=>{const _0x237558=_0x1cf34c;if(_0x3c20f4){_0xec07d0=!![];let _0x146764=0x1;_0x5a45d9!==null&&(_0x5a45d9[_0x237558(0xc6)]>=0x1&&(_0x146764=0x2*_0x5a45d9[_0x237558(0xc6)]-0x1));_0x4647b6=_0x10f089['data']['data'],_0x4326fd=_0x5360d5['data']['data'];!_0x467e71&&(_0x350daf=Module[_0x237558(0xbe)](_0x10f089[_0x237558(0xba)],_0x10f089[_0x237558(0xe0)]),_0x467e71=Module[_0x237558(0xdb)](_0x350daf));!_0x26acee&&(_0x2a344c=Module[_0x237558(0xbe)](_0x5360d5[_0x237558(0xba)],_0x5360d5[_0x237558(0xe0)]),_0x26acee=Module[_0x237558(0xdb)](_0x2a344c));Module[_0x237558(0xb5)][_0x237558(0xb9)](_0x4647b6,_0x467e71),Module[_0x237558(0xb5)]['set'](_0x4326fd,_0x26acee);_0x394178===_0x237558(0xcc)?Module[_0x237558(0xc5)](_0x467e71,_0x26acee,_0x55332a,_0x10f089[_0x237558(0xba)],_0x10f089[_0x237558(0xe0)],_0x5360d5[_0x237558(0xba)],_0x5360d5[_0x237558(0xe0)],_0x146764):Module[_0x237558(0xde)](_0x467e71,_0x26acee,_0x55332a,_0x10f089['width'],_0x10f089[_0x237558(0xe0)]);let _0x5756dc=new Uint8ClampedArray(new Uint8Array(Module[_0x237558(0xb5)][_0x237558(0xc3)],_0x467e71,_0x350daf)),_0x142361=new ImageData(_0x5756dc,_0x10f089[_0x237558(0xba)],_0x10f089[_0x237558(0xe0)]);_0x230a6b[_0x237558(0xc0)]=_0x142361,Module[_0x237558(0xd6)](_0x467e71),Module['_destroy_buffer'](_0x26acee);}else console[_0x237558(0xd2)](_0x237558(0xb6));})[_0x1cf34c(0xdd)](_0x524127=>{const _0x39b3b0=_0x1cf34c;console[_0x39b3b0(0xd2)]('cannot\x20get\x20alpha\x20mask\x20due\x20to\x20'+_0x524127);}):console[_0x1cf34c(0xd2)]('Input\x20has\x20a\x20problem,\x20please\x20re-check');}catch(_0x3fa283){console[_0x1cf34c(0xd2)](_0x1cf34c(0xdc)+_0x3fa283);}return _0xec07d0;}